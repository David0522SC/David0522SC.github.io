<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>È†ÇÁ¥öÁöáÂÆ∂È™∞Â≠êÈ§®</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #052e16;
            color: white;
            overflow-x: hidden;
            touch-action: manipulation;
        }

        .casino-table {
            background: radial-gradient(circle, #065f46 0%, #052e16 100%);
            border: 10px solid #3f2305;
            box-shadow: inset 0 0 80px rgba(0,0,0,0.8), 0 20px 50px rgba(0,0,0,0.5);
        }

        .dice-container {
            perspective: 600px;
            display: inline-block;
            margin: 8px;
        }

        .dice {
            width: 45px;
            height: 45px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 1.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .dice figure {
            width: 45px;
            height: 45px;
            background: white;
            position: absolute;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: inset 0 0 5px rgba(0,0,0,0.2);
        }

        .dot {
            width: 9px;
            height: 9px;
            background: #222;
            border-radius: 50%;
            position: absolute;
        }

        .dice .front  { transform: rotateY(0deg) translateZ(22.5px); }
        .dice .back   { transform: rotateX(180deg) translateZ(22.5px); }
        .dice .right  { transform: rotateY(90deg) translateZ(22.5px); }
        .dice .left   { transform: rotateY(-90deg) translateZ(22.5px); }
        .dice .top    { transform: rotateX(90deg) translateZ(22.5px); }
        .dice .bottom { transform: rotateX(-90deg) translateZ(22.5px); }

        .f1 .dot1 { background: #e11d48; width: 12px; height: 12px; }
        .f2 .dot1 { top: 6px; left: 6px; } .f2 .dot2 { bottom: 6px; right: 6px; }
        .f3 .dot1 { top: 6px; left: 6px; } .f3 .dot2 { top: 18px; left: 18px; } .f3 .dot3 { bottom: 6px; right: 6px; }
        .f4 .dot1 { top: 6px; left: 6px; } .f4 .dot2 { top: 6px; right: 6px; } .f4 .dot3 { bottom: 6px; left: 6px; } .f4 .dot4 { bottom: 6px; right: 6px; }
        .f5 .dot1 { top: 5px; left: 5px; } .f5 .dot2 { top: 5px; right: 5px; } .f5 .dot3 { top: 18px; left: 18px; } .f5 .dot4 { bottom: 5px; left: 5px; } .f5 .dot5 { bottom: 5px; right: 5px; }
        .f6 .dot1 { top: 5px; left: 5px; } .f6 .dot2 { top: 5px; right: 5px; } .f6 .dot3 { top: 18px; left: 5px; } .f6 .dot4 { top: 18px; right: 5px; } .f6 .dot5 { bottom: 5px; left: 5px; } .f6 .dot6 { bottom: 5px; right: 5px; }

        .shake-anim { animation: shake 0.4s infinite; }
        @keyframes shake {
            0%, 100% { transform: translate(0, 0) rotate(0); }
            25% { transform: translate(-6px, -3px) rotate(-3deg); }
            50% { transform: translate(6px, 3px) rotate(3deg); }
            75% { transform: translate(-3px, 6px) rotate(-1.5deg); }
        }

        .chip-visual {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 2px dashed rgba(255,255,255,0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px;
            font-weight: 900;
            box-shadow: 0 3px 5px rgba(0,0,0,0.5);
            margin-bottom: -28px;
            position: relative;
        }

        .chip-stack {
            display: flex;
            flex-direction: column-reverse;
            align-items: center;
            min-height: 40px;
            margin-bottom: 2px;
            pointer-events: none;
        }

        .bet-option {
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(255, 255, 255, 0.05);
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            padding: 10px 0;
            cursor: pointer;
        }
        
        .bet-option:active { transform: scale(0.95); }
        #summary-modal, #init-modal { backdrop-filter: blur(15px); }

        /* Ê≠∑Âè≤Ë®òÈåÑÂ∞èÊ®ôÁ±§Ê®£Âºè */
        .history-tag {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 900;
            border: 1px solid rgba(255,255,255,0.2);
        }
    </style>
</head>
<body class="flex flex-col items-center min-h-screen p-4 pb-10">

    <!-- ÂàùÂßãË≤∑ÂÖ• Modal -->
    <div id="init-modal" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[100] p-6">
        <div class="bg-gray-900 p-8 rounded-[2rem] shadow-2xl w-full max-w-sm text-center border border-yellow-500/30">
            <h1 class="text-3xl font-black mb-1 text-yellow-500 tracking-tighter uppercase">Royal Dice</h1>
            <p class="text-gray-500 mb-8 text-xs uppercase tracking-widest italic">Experience the Luxury</p>
            <div class="mb-8 text-left">
                <label class="block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3 ml-1">ÂÖåÊèõÂÖ•Â†¥Á±åÁ¢º</label>
                <input type="number" id="init-balance-input" value="1000" class="w-full p-4 rounded-2xl bg-black text-white text-center text-3xl font-black outline-none border border-white/10 focus:border-yellow-500 transition">
            </div>
            <button onclick="startGame()" class="w-full py-5 bg-yellow-600 hover:bg-yellow-500 text-yellow-950 rounded-2xl font-black text-xl shadow-xl transition transform active:scale-95">ÂÖåÊèõ‰∏¶ÂÖ•Â†¥</button>
        </div>
    </div>

    <!-- ÈÅäÊà≤ÁµêÁÆó Modal -->
    <div id="summary-modal" class="fixed inset-0 bg-black bg-opacity-95 hidden items-center justify-center z-[200] p-6">
        <div class="bg-gray-900 p-10 rounded-[3rem] w-full max-w-sm text-center border border-blue-500/30">
            <h2 class="text-2xl font-black mb-8 text-blue-400 uppercase tracking-widest">Èõ¢Â†¥ÁµêÁÆóÂñÆ</h2>
            <div class="space-y-5 mb-10 text-left bg-black/50 p-6 rounded-3xl">
                <div class="flex justify-between items-center text-sm">
                    <span class="text-gray-500">Ë≤∑ÂÖ•Á±åÁ¢º</span>
                    <span id="sum-init" class="font-bold text-white"></span>
                </div>
                <div class="flex justify-between items-center text-sm">
                    <span class="text-gray-500">Ââ©È§òÁ±åÁ¢º</span>
                    <span id="sum-final" class="font-bold text-white"></span>
                </div>
                <div class="flex justify-between items-center font-black border-t border-white/10 pt-5 text-2xl">
                    <span id="sum-label" class="text-blue-400">Á∏ΩÁõàËôß</span>
                    <span id="sum-profit"></span>
                </div>
            </div>
            <button onclick="showInitModal()" class="w-full py-5 bg-blue-600 hover:bg-blue-500 text-white rounded-2xl font-black text-xl transition transform active:scale-95">ÂÜçÊ¨°ÂÖ•Â†¥</button>
        </div>
    </div>

    <!-- È†ÇÈÉ®ÁãÄÊÖãÂàó -->
    <div class="w-full max-w-md flex justify-between items-center mb-4 px-6 py-4 bg-black/40 rounded-3xl border border-white/5 backdrop-blur-md">
        <div class="flex flex-col">
            <span class="text-[9px] text-gray-500 font-bold uppercase tracking-widest">My Balance</span>
            <span id="balance-display" class="text-xl font-black text-yellow-500 leading-tight">$0</span>
        </div>
        <button onclick="endGame()" class="px-4 py-2 bg-red-900/20 hover:bg-red-900/40 border border-red-500/20 rounded-xl text-[9px] font-black text-red-500 transition uppercase tracking-widest">ÁµêÁÆóÈÄÄÂ†¥</button>
        <div class="flex flex-col items-end">
            <span class="text-[9px] text-gray-500 font-bold uppercase tracking-widest">Total Wager</span>
            <span id="total-bet-display" class="text-xl font-black text-white leading-tight">$0</span>
        </div>
    </div>

    <!-- Ê≠∑Âè≤Á¥ÄÈåÑÊ¨Ñ‰Ωç -->
    <div class="w-full max-w-md mb-2 px-2 flex items-center gap-3 overflow-x-auto no-scrollbar">
        <span class="text-[9px] font-black text-white/30 uppercase tracking-widest whitespace-nowrap">History:</span>
        <div id="history-container" class="flex gap-2">
            <!-- Ê≠∑Âè≤ÈªûÊï∏ÊúÉÈ°ØÁ§∫Âú®ÈÄôË£° -->
            <span class="text-[9px] text-white/20 italic">No data yet</span>
        </div>
    </div>

    <!-- Ë≥≠Ê°åÂçÄÂüü -->
    <div class="casino-table w-full max-w-xs aspect-square rounded-full relative flex flex-col items-center justify-center mb-6 pointer-events-none">
        <div id="dices-area" class="flex opacity-0 transition-all duration-700 transform scale-50">
            <div class="dice-container"><div id="dice1" class="dice">
                <figure class="front f1"><div class="dot dot1"></div></figure>
                <figure class="back f6"><div class="dot dot1"></div><div class="dot dot2"></div><div class="dot dot3"></div><div class="dot dot4"></div><div class="dot dot5"></div><div class="dot dot6"></div></figure>
                <figure class="right f3"><div class="dot dot1"></div><div class="dot dot2"></div><div class="dot dot3"></div></figure>
                <figure class="left f4"><div class="dot dot1"></div><div class="dot dot2"></div><div class="dot dot3"></div><div class="dot dot4"></div></figure>
                <figure class="top f2"><div class="dot dot1"></div><div class="dot dot2"></div></figure>
                <figure class="bottom f5"><div class="dot dot1"></div><div class="dot dot2"></div><div class="dot dot3"></div><div class="dot dot4"></div><div class="dot dot5"></div></figure>
            </div></div>
            <div class="dice-container"><div id="dice2" class="dice">
                <figure class="front f1"><div class="dot dot1"></div></figure>
                <figure class="back f6"><div class="dot dot1"></div><div class="dot dot2"></div><div class="dot dot3"></div><div class="dot dot4"></div><div class="dot dot5"></div><div class="dot dot6"></div></figure>
                <figure class="right f3"><div class="dot dot1"></div><div class="dot dot2"></div><div class="dot dot3"></div></figure>
                <figure class="left f4"><div class="dot dot1"></div><div class="dot dot2"></div><div class="dot dot3"></div><div class="dot dot4"></div></figure>
                <figure class="top f2"><div class="dot dot1"></div><div class="dot dot2"></div></figure>
                <figure class="bottom f5"><div class="dot dot1"></div><div class="dot dot2"></div><div class="dot dot3"></div><div class="dot dot4"></div><div class="dot dot5"></div></figure>
            </div></div>
        </div>
        <div id="cup" class="absolute inset-0 flex items-center justify-center">
            <svg width="140" height="140" viewBox="0 0 100 100">
                <defs>
                    <linearGradient id="cupGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:#4a2c21" /><stop offset="50%" style="stop-color:#7d5142" /><stop offset="100%" style="stop-color:#331A12" />
                    </linearGradient>
                </defs>
                <path d="M15 85 Q 50 95 85 85 L 75 25 Q 50 15 25 25 Z" fill="url(#cupGrad)" stroke="#22110b" stroke-width="1.5" />
                <circle cx="50" cy="15" r="7" fill="#22110b" />
            </svg>
        </div>
        <div id="status-display" class="absolute bottom-8 text-yellow-500/50 font-black text-[9px] tracking-[0.3em] uppercase">Ready</div>
    </div>

    <!-- Ê†∏ÂøÉÊìç‰ΩúÊåâÈàï -->
    <div class="w-full max-w-md mb-8">
        <button id="main-action-btn" onclick="handleMainAction()" class="w-full py-5 bg-gradient-to-b from-yellow-500 to-yellow-700 text-yellow-950 rounded-[2rem] font-black text-lg shadow-2xl transition transform active:scale-95 uppercase tracking-widest">
            ÈñãÂßãÊêñÈ™∞
        </button>
    </div>

    <!-- ‰∏ãÊ≥®ÁúãÊùø -->
    <div id="betting-board" class="w-full max-w-md grid grid-cols-2 gap-4 mb-8 opacity-40 pointer-events-none transition-all duration-500">
        <button onclick="placeBet('small')" class="bet-option h-36 rounded-[2.5rem] border-b-4 border-blue-900 shadow-xl">
            <div id="stack-small" class="chip-stack"></div>
            <span class="text-blue-400 font-black text-2xl uppercase italic leading-none">Small</span>
            <div id="val-small" class="mt-1 font-black text-yellow-500 text-xs">$0</div>
        </button>
        <button onclick="placeBet('large')" class="bet-option h-36 rounded-[2.5rem] border-b-4 border-red-900 shadow-xl">
            <div id="stack-large" class="chip-stack"></div>
            <span class="text-red-500 font-black text-2xl uppercase italic leading-none">Large</span>
            <div id="val-large" class="mt-1 font-black text-yellow-500 text-xs">$0</div>
        </button>
        <button onclick="placeBet('draw')" class="bet-option col-span-2 py-5 rounded-[2.5rem] border-b-4 border-green-900 shadow-xl">
            <div id="stack-draw" class="chip-stack"></div>
            <span class="text-green-400 font-black text-xl uppercase tracking-tighter">Draw (7) ¬∑ 1:5</span>
            <div id="val-draw" class="font-black text-yellow-500 text-xs mt-1">$0</div>
        </button>
    </div>

    <!-- Á±åÁ¢ºÊâòÁõ§ -->
    <div class="w-full max-w-md bg-black/50 p-4 rounded-full flex justify-around items-center border border-white/10 shadow-2xl">
        <div onclick="setSelectedChip(10, this)" class="chip-btn cursor-pointer transition-all"><div class="w-12 h-12 rounded-full border-2 border-dashed border-white/50 bg-blue-600 flex items-center justify-center font-black text-[10px]">10</div></div>
        <div onclick="setSelectedChip(50, this)" class="chip-btn cursor-pointer transition-all"><div class="w-12 h-12 rounded-full border-2 border-dashed border-white/50 bg-red-600 flex items-center justify-center font-black text-[10px]">50</div></div>
        <div onclick="setSelectedChip(100, this)" class="chip-btn cursor-pointer transition-all"><div class="w-12 h-12 rounded-full border-2 border-dashed border-white/50 bg-gray-800 flex items-center justify-center font-black text-[10px]">100</div></div>
        <div onclick="setSelectedChip(500, this)" class="chip-btn cursor-pointer transition-all"><div class="w-12 h-12 rounded-full border-2 border-dashed border-white/50 bg-purple-700 flex items-center justify-center font-black text-[10px]">500</div></div>
    </div>

    <div class="w-full max-w-md mt-6">
        <button onclick="resetBets()" class="w-full py-3 text-gray-500 font-bold text-[10px] uppercase tracking-[0.3em] hover:text-white transition">ÈáçË®≠Ê°åÈù¢‰∏ãÊ≥®</button>
    </div>

    <div id="toast" class="fixed top-24 bg-yellow-600 text-white px-8 py-3 rounded-full shadow-2xl transition-all duration-500 opacity-0 pointer-events-none z-[300] font-black text-xs border border-white/20">Toast</div>

    <script>
        let initialAmount = 0;
        let balance = 0;
        let selectedChip = 10;
        let bets = { small: 0, large: 0, draw: 0 };
        let diceValues = [1, 1];
        let gameState = 'IDLE';
        let history = []; // ÂÑ≤Â≠òÊ≠∑Âè≤Ë®òÈåÑ

        const chipColors = { 10: 'bg-blue-600', 50: 'bg-red-600', 100: 'bg-gray-800', 500: 'bg-purple-700' };

        function showInitModal() {
            document.getElementById('summary-modal').style.display = 'none';
            document.getElementById('init-modal').style.display = 'flex';
            bets = { small: 0, large: 0, draw: 0 };
            history = []; // Ê∏ÖÁ©∫Ê≠∑Âè≤
            updateHistoryUI();
            document.querySelectorAll('.chip-stack').forEach(s => s.innerHTML = '');
            document.getElementById('cup').style.transform = 'translateY(0)';
            document.getElementById('cup').style.opacity = '1';
            document.getElementById('dices-area').style.opacity = '0';
            gameState = 'IDLE';
            updateActionBtn();
            updateUI();
        }

        function startGame() {
            const val = parseInt(document.getElementById('init-balance-input').value);
            if (val <= 0 || isNaN(val)) return showToast("Ë´ãËº∏ÂÖ•Ê≠£Á¢∫ÈáëÈ°ç");
            initialAmount = val;
            balance = val;
            updateUI();
            document.getElementById('init-modal').style.display = 'none';
            setSelectedChip(10, document.querySelectorAll('.chip-btn')[0]);
        }

        function handleMainAction() {
            if (gameState === 'IDLE' || gameState === 'REVEALED') startNewRound();
            else if (gameState === 'BETTING') revealResult();
        }

        function startNewRound() {
            gameState = 'SHAKING';
            bets = { small: 0, large: 0, draw: 0 };
            document.querySelectorAll('.chip-stack').forEach(s => s.innerHTML = '');
            updateActionBtn();
            
            document.getElementById('status-display').textContent = "Shaking...";
            document.getElementById('dices-area').style.opacity = '0';
            document.getElementById('dices-area').style.transform = 'scale(0.5)';
            
            const cup = document.getElementById('cup');
            cup.style.transform = 'translateY(0)';
            cup.style.opacity = '1';
            cup.classList.add('shake-anim');

            diceValues = [Math.floor(Math.random() * 6) + 1, Math.floor(Math.random() * 6) + 1];

            setTimeout(() => {
                cup.classList.remove('shake-anim');
                gameState = 'BETTING';
                document.getElementById('status-display').textContent = "Ë´ã‰∏ãÊ≥®";
                updateActionBtn();
                updateUI();
                applyDiceRotation(document.getElementById('dice1'), diceValues[0]);
                applyDiceRotation(document.getElementById('dice2'), diceValues[1]);
            }, 1200);
        }

        function revealResult() {
            const total = Object.values(bets).reduce((a, b) => a + b, 0);
            if (total === 0) return showToast("Ë´ãËá≥Â∞ë‰∏ãÊ≥®‰∏ÄÂÄãÂçÄÂüü");

            gameState = 'REVEALING';
            updateActionBtn();

            const cup = document.getElementById('cup');
            cup.style.transform = 'translateY(-180px) rotate(10deg)';
            cup.style.opacity = '0';
            
            setTimeout(() => {
                document.getElementById('dices-area').style.opacity = '1';
                document.getElementById('dices-area').style.transform = 'scale(1.3)';
                checkWin();
            }, 500);
        }

        function checkWin() {
            const sum = diceValues[0] + diceValues[1];
            const isPair = diceValues[0] === diceValues[1];
            let won = 0;

            if (sum >= 2 && sum <= 6) { if (bets.small > 0) won += bets.small * 2 + (isPair ? bets.small : 0); }
            else if (sum >= 8 && sum <= 12) { if (bets.large > 0) won += bets.large * 2 + (isPair ? bets.large : 0); }
            else if (sum === 7) { if (bets.draw > 0) won += bets.draw * 6; }

            if (won > 0) {
                balance += won;
                showToast(`üèÜ Ë¥èÂæó $${won}!`);
            } else {
                showToast("Êú™‰∏≠Áçé");
            }

            // Êõ¥Êñ∞Ê≠∑Âè≤Á¥ÄÈåÑ
            addHistory(sum);

            document.getElementById('status-display').textContent = `ÈªûÊï∏: ${sum}` + (isPair ? " [Â∞çÂ≠ê]" : "");
            gameState = 'REVEALED';
            updateActionBtn();
            updateUI();

            if (balance === 0) {
                setTimeout(() => {
                    showToast("Ë≥áÈáëÂ∑≤Áî®ÁΩÑÔºåËá™ÂãïÁµêÁÆó");
                    endGame();
                }, 1500);
            }
        }

        function addHistory(sum) {
            let type = '';
            if (sum >= 2 && sum <= 6) type = 'S';
            else if (sum >= 8 && sum <= 12) type = 'L';
            else type = 'D';

            history.unshift({ sum, type }); // Âä†Âú®ÊúÄÂâçÈù¢
            if (history.length > 5) history.pop(); // Âè™ÁïôÊúÄËøë 5 Á≠Ü
            updateHistoryUI();
        }

        function updateHistoryUI() {
            const container = document.getElementById('history-container');
            if (history.length === 0) {
                container.innerHTML = '<span class="text-[9px] text-white/20 italic">No data yet</span>';
                return;
            }

            container.innerHTML = history.map(h => {
                let colorClass = '';
                if (h.type === 'S') colorClass = 'bg-blue-600/80';
                else if (h.type === 'L') colorClass = 'bg-red-600/80';
                else colorClass = 'bg-green-600/80';
                
                return `<div class="history-tag ${colorClass}">${h.sum}</div>`;
            }).join('');
        }

        function updateActionBtn() {
            const btn = document.getElementById('main-action-btn');
            btn.classList.remove('opacity-50', 'pointer-events-none');
            
            if (gameState === 'IDLE' || gameState === 'REVEALED') {
                btn.textContent = "ÈñãÂßãÊêñÈ™∞";
                btn.className = "w-full py-5 bg-gradient-to-b from-yellow-500 to-yellow-700 text-yellow-950 rounded-[2rem] font-black text-lg shadow-2xl transition transform active:scale-95 uppercase tracking-widest";
            } else if (gameState === 'SHAKING' || gameState === 'REVEALING') {
                btn.textContent = gameState === 'SHAKING' ? "ÊêñÈ™∞‰∏≠..." : "Êè≠Èñã‰∏≠...";
                btn.classList.add('opacity-50', 'pointer-events-none');
            } else if (gameState === 'BETTING') {
                btn.textContent = "Êè≠ÈñãÁµêÊûú";
                btn.className = "w-full py-5 bg-gradient-to-b from-green-500 to-green-700 text-green-950 rounded-[2rem] font-black text-lg shadow-2xl transition transform active:scale-95 uppercase tracking-widest";
            }
        }

        function placeBet(type) {
            if (gameState !== 'BETTING') return;
            if (balance < selectedChip) return showToast("È§òÈ°ç‰∏çË∂≥");
            balance -= selectedChip;
            bets[type] += selectedChip;
            const stack = document.getElementById(`stack-${type}`);
            const chip = document.createElement('div');
            chip.className = `chip-visual ${chipColors[selectedChip]}`;
            chip.textContent = selectedChip;
            const rot = (Math.random() - 0.5) * 12;
            const xOff = (Math.random() - 0.5) * 5;
            chip.style.transform = `rotate(${rot}deg) translateX(${xOff}px)`;
            stack.appendChild(chip);
            updateUI();
        }

        function resetBets() {
            if (gameState !== 'BETTING') return;
            balance += (bets.small + bets.large + bets.draw);
            bets = { small: 0, large: 0, draw: 0 };
            document.querySelectorAll('.chip-stack').forEach(s => s.innerHTML = '');
            updateUI();
        }

        function endGame() {
            const profit = balance - initialAmount;
            document.getElementById('sum-init').textContent = `$${initialAmount}`;
            document.getElementById('sum-final').textContent = `$${balance}`;
            const profitEl = document.getElementById('sum-profit');
            
            if (profit > 0) {
                profitEl.textContent = `+$${profit}`;
                profitEl.className = 'font-black text-green-400';
            } else if (profit < 0) {
                profitEl.textContent = `-$${Math.abs(profit)}`;
                profitEl.className = 'font-black text-red-500';
            } else {
                profitEl.textContent = `$0`;
                profitEl.className = 'font-black text-white';
            }
            document.getElementById('summary-modal').style.display = 'flex';
        }

        function updateUI() {
            document.getElementById('balance-display').textContent = `$${balance}`;
            const total = Object.values(bets).reduce((a, b) => a + b, 0);
            document.getElementById('total-bet-display').textContent = `$${total}`;
            document.getElementById('val-small').textContent = `$${bets.small}`;
            document.getElementById('val-large').textContent = `$${bets.large}`;
            document.getElementById('val-draw').textContent = `$${bets.draw}`;
            document.getElementById('betting-board').style.opacity = gameState === 'BETTING' ? '1' : '0.4';
            document.getElementById('betting-board').style.pointerEvents = gameState === 'BETTING' ? 'auto' : 'none';
        }

        function setSelectedChip(val, el) {
            selectedChip = val;
            document.querySelectorAll('.chip-btn').forEach(btn => btn.classList.remove('scale-125'));
            el.classList.add('scale-125');
        }

        function applyDiceRotation(el, value) {
            let rx = 0, ry = 0;
            switch(value) {
                case 1: rx = 0; ry = 0; break;
                case 2: rx = -90; ry = 0; break;
                case 3: rx = 0; ry = -90; break;
                case 4: rx = 0; ry = 90; break;
                case 5: rx = 90; ry = 0; break;
                case 6: rx = 180; ry = 0; break;
            }
            el.style.transform = `rotateX(${rx + 1080}deg) rotateY(${ry + 1080}deg)`;
        }

        function showToast(msg) {
            const t = document.getElementById('toast');
            t.textContent = msg;
            t.style.opacity = "1";
            setTimeout(() => t.style.opacity = "0", 2000);
        }

        updateUI();
    </script>
</body>
</html>

